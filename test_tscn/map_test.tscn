[gd_scene load_steps=51 format=2]

[ext_resource path="res://map/Map_test.tscn" type="PackedScene" id=1]
[ext_resource path="res://spite/spite_1.tscn" type="PackedScene" id=2]
[ext_resource path="res://test_tscn/test_tool.gd" type="Script" id=3]
[ext_resource path="res://ani_png/light.png" type="Texture" id=4]
[ext_resource path="res://map/tileset_sc.tres" type="TileSet" id=5]

[sub_resource type="AnimationNodeAnimation" id=42]
animation = "RESET"

[sub_resource type="AnimationNodeAnimation" id=31]
animation = "idle_walk_up"

[sub_resource type="AnimationNodeAnimation" id=32]
animation = "idle_walk_left"

[sub_resource type="AnimationNodeAnimation" id=33]
animation = "idle_walk_right"

[sub_resource type="AnimationNodeAnimation" id=34]
animation = "idle_walk_down"

[sub_resource type="AnimationNodeBlendSpace2D" id=22]
auto_triangles = false
blend_point_0/node = SubResource( 31 )
blend_point_0/pos = Vector2( 0, -1 )
blend_point_1/node = SubResource( 32 )
blend_point_1/pos = Vector2( -1, 0 )
blend_point_2/node = SubResource( 33 )
blend_point_2/pos = Vector2( 1, 0 )
blend_point_3/node = SubResource( 34 )
blend_point_3/pos = Vector2( 0, 1 )
triangles = PoolIntArray( 0, 1, 3, 0, 2, 3 )
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id=63]
animation = "idle_weapon_up"

[sub_resource type="AnimationNodeAnimation" id=64]
animation = "idle_weapon_down"

[sub_resource type="AnimationNodeAnimation" id=65]
animation = "idle_weapon_right"

[sub_resource type="AnimationNodeAnimation" id=66]
animation = "idle_weapon_left"

[sub_resource type="AnimationNodeBlendSpace2D" id=67]
blend_point_0/node = SubResource( 63 )
blend_point_0/pos = Vector2( 0, -1 )
blend_point_1/node = SubResource( 64 )
blend_point_1/pos = Vector2( 0, 1 )
blend_point_2/node = SubResource( 65 )
blend_point_2/pos = Vector2( 1, 0 )
blend_point_3/node = SubResource( 66 )
blend_point_3/pos = Vector2( -1, 0 )
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id=35]
animation = "walk_up"

[sub_resource type="AnimationNodeAnimation" id=36]
animation = "walk_down"

[sub_resource type="AnimationNodeAnimation" id=37]
animation = "walk_left"

[sub_resource type="AnimationNodeAnimation" id=38]
animation = "walk_right"

[sub_resource type="AnimationNodeBlendSpace2D" id=39]
blend_point_0/node = SubResource( 35 )
blend_point_0/pos = Vector2( 0, -1 )
blend_point_1/node = SubResource( 36 )
blend_point_1/pos = Vector2( 0, 1 )
blend_point_2/node = SubResource( 37 )
blend_point_2/pos = Vector2( -1, 0 )
blend_point_3/node = SubResource( 38 )
blend_point_3/pos = Vector2( 1, 0 )
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id=43]
animation = "weapon_r_left"

[sub_resource type="AnimationNodeAnimation" id=44]
animation = "weapon_r_right"

[sub_resource type="AnimationNodeAnimation" id=45]
animation = "weapon_r_down"

[sub_resource type="AnimationNodeAnimation" id=46]
animation = "weapon_r_up"

[sub_resource type="AnimationNodeBlendSpace2D" id=47]
blend_point_0/node = SubResource( 43 )
blend_point_0/pos = Vector2( -1, 0 )
blend_point_1/node = SubResource( 44 )
blend_point_1/pos = Vector2( 1, 0 )
blend_point_2/node = SubResource( 45 )
blend_point_2/pos = Vector2( 0, 1 )
blend_point_3/node = SubResource( 46 )
blend_point_3/pos = Vector2( 0, -1 )
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id=48]
animation = "weapon_w_down"

[sub_resource type="AnimationNodeAnimation" id=49]
animation = "weapon_w_up"

[sub_resource type="AnimationNodeAnimation" id=50]
animation = "weapon_w_left"

[sub_resource type="AnimationNodeAnimation" id=51]
animation = "weapon_w_right"

[sub_resource type="AnimationNodeBlendSpace2D" id=52]
blend_point_0/node = SubResource( 48 )
blend_point_0/pos = Vector2( 0, 1 )
blend_point_1/node = SubResource( 49 )
blend_point_1/pos = Vector2( 0, -1 )
blend_point_2/node = SubResource( 50 )
blend_point_2/pos = Vector2( -1, 0 )
blend_point_3/node = SubResource( 51 )
blend_point_3/pos = Vector2( 1, 0 )
blend_mode = 1

[sub_resource type="AnimationNodeAnimation" id=77]
animation = "weapon_w_up_fw"

[sub_resource type="AnimationNodeAnimation" id=78]
animation = "weapon_w_right_fw"

[sub_resource type="AnimationNodeAnimation" id=79]
animation = "weapon_w_left_fw"

[sub_resource type="AnimationNodeAnimation" id=80]
animation = "weapon_w_down_fw"

[sub_resource type="AnimationNodeBlendSpace2D" id=72]
blend_point_0/node = SubResource( 77 )
blend_point_0/pos = Vector2( 0, -1 )
blend_point_1/node = SubResource( 78 )
blend_point_1/pos = Vector2( 1, 0 )
blend_point_2/node = SubResource( 79 )
blend_point_2/pos = Vector2( -1, 0 )
blend_point_3/node = SubResource( 80 )
blend_point_3/pos = Vector2( 0, 1 )
blend_mode = 1

[sub_resource type="AnimationNodeStateMachineTransition" id=40]

[sub_resource type="AnimationNodeStateMachineTransition" id=41]

[sub_resource type="AnimationNodeStateMachineTransition" id=53]

[sub_resource type="AnimationNodeStateMachineTransition" id=54]

[sub_resource type="AnimationNodeStateMachineTransition" id=68]
switch_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id=69]

[sub_resource type="AnimationNodeStateMachineTransition" id=70]

[sub_resource type="AnimationNodeStateMachineTransition" id=71]

[sub_resource type="AnimationNodeStateMachineTransition" id=73]

[sub_resource type="AnimationNodeStateMachineTransition" id=74]

[sub_resource type="AnimationNodeStateMachineTransition" id=75]

[sub_resource type="AnimationNodeStateMachineTransition" id=76]

[sub_resource type="AnimationNodeStateMachine" id=81]
resource_local_to_scene = true
states/RESET/node = SubResource( 42 )
states/RESET/position = Vector2( 874, 157.348 )
states/idle_walk/node = SubResource( 22 )
states/idle_walk/position = Vector2( 486, 157.348 )
states/idle_weapon/node = SubResource( 67 )
states/idle_weapon/position = Vector2( 209, 157.348 )
states/walk/node = SubResource( 39 )
states/walk/position = Vector2( 706, 157.348 )
states/weapon_r/node = SubResource( 47 )
states/weapon_r/position = Vector2( 209, -19 )
states/weapon_w/node = SubResource( 52 )
states/weapon_w/position = Vector2( 69, 339 )
states/weapon_w_fw/node = SubResource( 72 )
states/weapon_w_fw/position = Vector2( 312.281, 339 )
transitions = [ "idle_walk", "walk", SubResource( 40 ), "walk", "idle_walk", SubResource( 41 ), "idle_walk", "weapon_r", SubResource( 53 ), "weapon_r", "idle_walk", SubResource( 54 ), "weapon_r", "idle_weapon", SubResource( 68 ), "idle_weapon", "weapon_w", SubResource( 69 ), "weapon_w", "idle_weapon", SubResource( 70 ), "idle_weapon", "idle_walk", SubResource( 71 ), "idle_weapon", "weapon_w_fw", SubResource( 73 ), "weapon_w_fw", "idle_weapon", SubResource( 74 ), "weapon_w", "weapon_w_fw", SubResource( 75 ), "weapon_w_fw", "weapon_w", SubResource( 76 ) ]
start_node = "idle_walk"
graph_offset = Vector2( -105.719, -124.18 )

[sub_resource type="AnimationNodeStateMachinePlayback" id=82]

[node name="map" type="Node2D"]
position = Vector2( 1, 4 )

[node name="tile_up" type="TileMap" parent="."]
modulate = Color( 0.196078, 0.196078, 0.196078, 1 )
light_mask = 6
z_index = 1
tile_set = ExtResource( 5 )
cell_size = Vector2( 32, 32 )
collision_layer = 6
collision_mask = 0
occluder_light_mask = 6
format = 1

[node name="tile_ground" parent="." instance=ExtResource( 1 )]
modulate = Color( 0.196078, 0.196078, 0.196078, 1 )
light_mask = 6
cell_size = Vector2( 32, 32 )
cell_custom_transform = Transform2D( 32, 0, 0, 32, 0, 0 )
collision_layer = 6
collision_mask = 0
occluder_light_mask = 6
tile_data = PoolIntArray( -131072, 5, 0, -131071, 5, 0, -131070, 5, 0, -131069, 5, 0, -131068, 5, 0, -131067, 5, 0, -131066, 5, 0, -131065, 5, 0, -131064, 5, 0, -131063, 5, 0, -131062, 5, 0, -131061, 5, 0, -131060, 5, 0, -131059, 5, 0, -131058, 5, 0, -131057, 5, 0, -131056, 5, 0, -131055, 536870917, 0, 65536, 13, 0, 65537, 13, 0, 65538, 13, 0, 65539, 13, 0, 65540, 13, 0, 65541, 13, 0, 65542, 13, 0, 65543, 13, 0, 65544, 13, 0, 65545, 13, 0, 65546, 13, 0, 65547, 13, 0, 65548, 13, 0, 65549, 13, 0, 65550, 13, 0, 65551, 13, 0, 65552, 13, 0, 131072, 13, 0, 131073, 13, 0, 131074, 13, 0, 131075, 13, 0, 131076, 13, 0, 131077, 13, 0, 131078, 13, 0, 131079, 13, 0, 131080, 13, 0, 131081, 13, 0, 131082, 13, 0, 131083, 13, 0, 131084, 13, 0, 131085, 13, 0, 131086, 13, 0, 131087, 13, 0, 131088, 13, 0, 196608, 13, 0, 196609, 13, 0, 196610, 13, 0, 196611, 13, 0, 196612, 13, 0, 196613, 13, 0, 196614, 13, 0, 196615, 3, 0, 196619, 13, 0, 196620, 13, 0, 196621, 13, 0, 196622, 13, 0, 196623, 13, 0, 196624, 13, 0, 262144, 13, 0, 262145, 13, 0, 262146, 13, 0, 262147, 13, 0, 262148, 13, 0, 262149, 13, 0, 262150, 15, 0, 262155, 15, 0, 262156, 13, 0, 262157, 13, 0, 262158, 13, 0, 262159, 13, 0, 262160, 13, 0, 327680, 13, 0, 327681, 13, 0, 327682, 13, 0, 327683, 13, 0, 327684, 13, 0, 327685, 13, 0, 327686, 15, 0, 327691, 15, 0, 327692, 13, 0, 327693, 13, 0, 327694, 13, 0, 327695, 13, 0, 327696, 13, 0, 393216, 13, 0, 393217, 13, 0, 393218, 13, 0, 393219, 13, 0, 393220, 13, 0, 393221, 13, 0, 393222, 15, 0, 393223, 15, 0, 393224, 15, 0, 393225, 15, 0, 393226, 15, 0, 393227, 15, 0, 393228, 13, 0, 393229, 13, 0, 393230, 13, 0, 393231, 13, 0, 393232, 13, 0, 458752, 13, 0, 458753, 13, 0, 458754, 13, 0, 458755, 13, 0, 458756, 13, 0, 458757, 13, 0, 458758, 13, 0, 458759, 13, 0, 458760, 13, 0, 458761, 13, 0, 458762, 13, 0, 458763, 13, 0, 458764, 13, 0, 458765, 13, 0, 458766, 13, 0, 458767, 13, 0, 458768, 13, 0, 524288, 13, 0, 524289, 13, 0, 524290, 13, 0, 524291, 13, 0, 524292, 13, 0, 524293, 13, 0, 524294, 13, 0, 524295, 13, 0, 524296, 13, 0, 524297, 13, 0, 524298, 13, 0, 524299, 13, 0, 524300, 13, 0, 524301, 13, 0, 524302, 13, 0, 524303, 13, 0, 524304, 13, 0 )

[node name="KinematicBody2D" parent="." instance=ExtResource( 2 )]
modulate = Color( 0.27451, 0.27451, 0.27451, 1 )
position = Vector2( 77, 155 )
z_index = 4
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" parent="KinematicBody2D" index="3"]
frame = 1

[node name="ani_player_tree" parent="KinematicBody2D" index="5"]
tree_root = SubResource( 81 )
parameters/playback = SubResource( 82 )

[node name="aim_ray" parent="KinematicBody2D" index="6"]
collision_mask = 14

[node name="camera" parent="KinematicBody2D" index="7"]
drag_margin_h_enabled = true
drag_margin_v_enabled = true
drag_margin_top = 0.2
drag_margin_bottom = 0.5

[node name="gun_ray" parent="KinematicBody2D" index="8"]
light_mask = 6
default_color = Color( 0.858824, 0.211765, 0.2, 1 )
texture_mode = 0
begin_cap_mode = 0
end_cap_mode = 0
antialiased = true

[node name="gun_light" type="Light2D" parent="KinematicBody2D"]
light_mask = 15
enabled = false
texture = ExtResource( 4 )
offset = Vector2( 190, 0 )
color = Color( 0.968627, 0.929412, 0.929412, 1 )
energy = 1.5
range_item_cull_mask = 15
shadow_enabled = true
shadow_item_cull_mask = 14

[node name="global_set" type="Node" parent="."]
script = ExtResource( 3 )

[editable path="KinematicBody2D"]
